<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaMask Integration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f4f4f4;
        }
        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>MetaMask Integration</h1>
    <button id="connectButton">Connect MetaMask</button>
    <button id="addNetworkButton">Add Network</button>
    <button id="switchNetworkButton">Switch Network</button>

    <script>
        // Constants
        const defaultChainId = '0x3E5'; // Default chain ID
        const defaultRpcUrl = 'https://rpc-testnet.5ire.network'; // Default RPC URL
        const defaultBlockExplorerUrls = 'https://explorer.5ire.network';
        const defaultCurrentSymbol = '5ire';
        const defaultChainName = '5ireChain';

  // Updated function to add a network to MetaMask
async function addNetwork() {
  if (window.ethereum) {
    try {
      await window.ethereum.request({
        method: 'wallet_addEthereumChain',
        params: [{
          chainId: defaultChainId,
          chainName: defaultChainName,
          rpcUrls: [defaultRpcUrl],
          blockExplorerUrls: [defaultBlockExplorerUrls],
          nativeCurrency: {
            name: defaultChainName,
            symbol: defaultCurrentSymbol,
            decimals: 18
          }
        }]
      });
      alert('Network added to MetaMask');
    } catch (error) {
      console.error('Failed to add network:', error);
      alert('Failed to add network: ' + error.message);
    }
  } else {
    alert('MetaMask is not installed');
  }
}

// Updated function to switch to a specific network in MetaMask
async function switchNetwork() {
  if (window.ethereum) {
    try {
      await window.ethereum.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId: defaultChainId }],
      });
      alert('Network switched to: ' + defaultChainName);
    } catch (error) {
      console.error('Failed to switch network:', error);
      alert('Failed to switch network: ' + error.message);
    }
  } else {
    alert('MetaMask is not installed');
  }
}


        // Function to connect MetaMask wallet
        async function connectMetaMask() {
            if (window.ethereum) {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    alert('Connected account: ' + accounts[0]);
                } catch (error) {
                    console.error('Failed to connect MetaMask:', error);
                    alert('Failed to connect MetaMask');
                }
            } else {
                alert('MetaMask is not installed');
            }
        }

        // Event listeners
        document.getElementById('connectButton').addEventListener('click', connectMetaMask);
        document.getElementById('addNetworkButton').addEventListener('click', addNetwork);
        document.getElementById('switchNetworkButton').addEventListener('click', switchNetwork);
    </script>
</body>
</html>
